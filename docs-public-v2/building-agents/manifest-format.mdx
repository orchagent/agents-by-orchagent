---
title: "Manifest Format"
description: "The orchagent.json configuration schema"
---

Every agent needs an `orchagent.json` file that defines its configuration, dependencies, and runtime limits.

<Note>
**Skills use a different format.** Skills use a `SKILL.md` file with YAML frontmatter instead of `orchagent.json`. See [Agent Types](/building-agents/agent-types#skills) for the SKILL.md format.
</Note>

## Basic Structure

```json
{
  "name": "my-agent",
  "type": "tool",
  "description": "What my agent does",
  "supported_providers": ["openai", "anthropic"],
  "default_endpoint": "analyze",
  "timeout_seconds": 60
}
```

<Note>
**Versions are auto-assigned.** You don't need to specify a `version` field in your manifest. The server automatically assigns versions on each publish (v1, v2, v3...).
</Note>

## Required Fields

| Field | Type | Description |
|-------|------|-------------|
| `name` | string | Agent name (lowercase, hyphens allowed) |
| `type` | string | `"prompt"`, `"agent"`, `"tool"`, or `"skill"` |
| `description` | string | Short description of what the agent does |
| `supported_providers` | array | LLM providers: `["openai", "anthropic", "gemini", "any"]`. Agents (type `"agent"`) must use `["anthropic"]`. |

## Optional Fields

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `default_endpoint` | string | `"analyze"` | Default endpoint for `orch call` |
| `timeout_seconds` | number | `60` | Request timeout |
| `tags` | array | `[]` | Searchable tags |
| `is_public` | boolean | `true` | Public (free) or private (Pro plan required) |
| `default_skills` | array | `[]` | Skills to inject into agent prompts (e.g., `["yourorg/writing-style"]`) |
| `skills_locked` | boolean | `false` | When true, callers cannot override default_skills via flags (immutable after publish) |

## Tool Fields

Additional fields for tools:

| Field | Type | Description |
|-------|------|-------------|
| `entrypoint` | string | Entry file to execute (e.g., `sandbox_main.py`) |
| `url` | string | Deployed service URL (legacy) |
| `source_url` | string | Git URL for local execution |
| `run_command` | string | Command to run locally |
| `bundle` | object | Bundle configuration (see below) |

### Bundle Configuration

Control what files are included in your tool bundle:

```json
{
  "bundle": {
    "exclude": ["data/", "*.log", "large_model.bin"],
    "include": ["important.dat"]
  }
}
```

| Field | Type | Description |
|-------|------|-------------|
| `exclude` | array | Glob patterns to exclude from bundle |
| `include` | array | Glob patterns to include (overrides excludes) |

### Example

```json
{
  "name": "leak-finder",
  "type": "tool",
  "description": "Finds leaked secrets in codebases",
  "supported_providers": ["gemini"],
  "entrypoint": "sandbox_main.py",
  "tags": ["security", "scanning"],
  "is_public": true
}
```

<Note>
For E2B sandbox execution (recommended), only `entrypoint` is needed. The `url`, `source_url`, and `run_command` fields are for legacy self-hosted agents.
</Note>

## Prompt-Based Agent Fields

Additional fields for prompt agents:

| Field | Type | Description |
|-------|------|-------------|
| `prompt_template` | string | Prompt with `{{variable}}` placeholders |
| `input_schema` | object | JSON Schema for input validation |
| `output_schema` | object | JSON Schema for output validation |

### Example

```json
{
  "name": "summarizer",
  "type": "prompt",
  "description": "Summarizes text content",
  "supported_providers": ["openai", "anthropic"],
  "prompt_template": "Summarize the following text in {{style}} style:\n\n{{text}}",
  "input_schema": {
    "type": "object",
    "properties": {
      "text": { "type": "string" },
      "style": { "type": "string", "enum": ["bullet", "paragraph", "tldr"] }
    },
    "required": ["text", "style"]
  },
  "output_schema": {
    "type": "object",
    "properties": {
      "summary": { "type": "string" }
    },
    "required": ["summary"]
  }
}
```

## Agent Fields

Additional fields for agents (type `"agent"`):

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `custom_tools` | array | `[]` | Command-wrapper tools available to the LLM |
| `max_turns` | number | `25` | Maximum agent loop iterations (platform max: 50) |
| `timeout_seconds` | number | `300` | Overall execution timeout |

### Custom Tools Format

Each custom tool has:

| Field | Required | Description |
|-------|----------|-------------|
| `name` | Yes | Tool name the LLM will call |
| `description` | Yes | What the tool does (shown to LLM) |
| `command` | Yes | Shell command to execute. Use `{{param}}` for parameters. |
| `input_schema` | No | JSON Schema for parameters (required if command has `{{param}}` placeholders) |

### Example

```json
{
  "name": "cairo-test-engineer",
  "type": "agent",
  "description": "Fixes Cairo code until tests pass",
  "supported_providers": ["anthropic"],
  "max_turns": 30,
  "timeout_seconds": 300,
  "custom_tools": [
    {
      "name": "run_tests",
      "description": "Run the Cairo test suite",
      "command": "snforge test"
    },
    {
      "name": "deploy",
      "description": "Deploy to the specified network",
      "command": "sncast deploy --network {{network}}",
      "input_schema": {
        "type": "object",
        "properties": {
          "network": { "type": "string", "description": "Target network" }
        },
        "required": ["network"]
      }
    }
  ]
}
```

<Note>
Agents also get built-in tools automatically: `bash`, `read_file`, `write_file`, `list_files`, and `submit_result`. You don't need to define these. See [Agent Types](/building-agents/agent-types#built-in-tools) for details.
</Note>

## Skill Composition

Agents can include skills by default using the `default_skills` field. Skills are injected into the agent's prompt at runtime.

```json
{
  "name": "code-reviewer",
  "type": "prompt",
  "description": "Reviews code with best practices",
  "supported_providers": ["anthropic", "openai"],
  "default_skills": [
    "yourorg/react-best-practices",
    "yourorg/writing-style"
  ],
  "prompt_template": "Review this code:\n\n{{code}}"
}
```

When called, the agent's prompt is prepended with the content from each skill. Callers can override this behavior (unless skills are locked):

- `--skills org/skill` - Add more skills
- `--skills-only org/skill` - Replace default_skills entirely
- `--no-skills` - Ignore all skills

### Locking Skills

Add `skills_locked: true` to prevent callers from overriding your default skills:

```json
{
  "name": "secure-reviewer",
  "default_skills": ["yourorg/owasp-rules"],
  "skills_locked": true
}
```

See [Orchestration - Locking Skills](/building-agents/orchestration#locking-skills) for details.

## Manifest Section (for Orchestrator Agents)

Agents that call other agents need a `manifest` section:

```json
{
  "name": "security-review",
  "type": "tool",
  "description": "Comprehensive security review",
  "manifest": {
    "manifest_version": 1,
    "dependencies": [
      { "id": "joe/leak-finder", "version": "v1" },
      { "id": "joe/vuln-scanner", "version": "v1" }
    ],
    "max_hops": 2,
    "timeout_ms": 120000,
    "per_call_downstream_cap": 100
  }
}
```

### Manifest Fields

| Field | Required | Description |
|-------|----------|-------------|
| `manifest_version` | Yes | Always `1` |
| `dependencies` | Yes | Array of `{id, version}` for agents you'll call |
| `max_hops` | Yes | Max call depth (>= 1 if you have deps) |
| `timeout_ms` | Yes | Total timeout for your agent |
| `per_call_downstream_cap` | Yes | Max downstream cap per dependency call |
| `min_required_hops` | No | Minimum hops caller must allow |
| `region` | No | Deployment region |
| `visibility` | No | `public` or `private` |
| `recommended_min_caller_budget` | No | Suggested minimum budget for callers |

### Dependency Format

```json
{
  "id": "org_slug/agent_name",
  "version": "v1"
}
```

## Validation Rules

The platform validates manifests on publish:

1. **Dependencies exist** - All declared dependencies must be registered
2. **No cycles** - Dependency graph must be acyclic
3. **max_hops >= 1** - Required when dependencies are declared
4. **Version pins** - Dependencies must specify exact versions

## Complete Example

```json
{
  "name": "security-review",
  "type": "tool",
  "description": "Comprehensive security review combining multiple scanners",
  "supported_providers": ["any"],
  "default_endpoint": "review",
  "timeout_seconds": 180,
  "url": "https://security-review-xyz.run.app",
  "source_url": "git+https://github.com/user/security-review.git",
  "run_command": "python3 -m security_review.cli",
  "tags": ["security", "scanning", "orchestrator"],
  "is_public": true,
  "manifest": {
    "manifest_version": 1,
    "dependencies": [
      { "id": "joe/leak-finder", "version": "v1" },
      { "id": "joe/vuln-scanner", "version": "v1" },
      { "id": "joe/license-checker", "version": "v1" }
    ],
    "max_hops": 2,
    "timeout_ms": 180000,
    "per_call_downstream_cap": 50,
    "min_required_hops": 2,
    "region": "us-east",
    "visibility": "public"
  }
}
```
