---
title: "CLI Commands"
description: "Complete reference for the orchagent CLI"
---

The orchagent CLI lets you interact with the platform from your terminal.

## Installation

```bash
npm install -g @orchagent/cli
```

<Tip>
The CLI also installs `orch` as a shorthand alias. All commands work with either `orchagent` or `orch`.
</Tip>

---

## Understanding Agents vs Skills

Before diving into commands, understand the two types of content on orchagent:

| | Agents | Skills |
|---|--------|--------|
| **What they are** | Active executors that DO things | Passive knowledge that TEACHES things |
| **Purpose** | Execute tasks and return results | Provide context, rules, guidelines |
| **Example** | `code-reviewer` analyzes your code | `react-best-practices` teaches React patterns |
| **How to use** | `run` or `install` | `skill install` |

**Simple rule:**
- Want AI to **DO** something? Use an **agent**
- Want AI to **KNOW** something? Use a **skill**

---

## Quick Reference

| Command | What It Does | Where It Runs |
|---------|--------------|---------------|
| `orch run <agent>` | Execute agent | Cloud (E2B sandbox) by default |
| `orch run --local <agent>` | Download and execute agent locally | Your machine |
| `orch install <agent>` | Export agent as sub-agent | Local files (for AI tools) |
| `orch skill install <skill>` | Download skill files | Local files (for AI tools) |
| `orch test` | Run agent tests locally | Your machine |
| `orch update` | Update installed agents | - |
| `orch formats` | List available export formats | - |
| `orch schedule create` | Create cron or webhook schedule | Cloud |
| `orch schedule list` | List schedules | - |
| `orch schedule trigger` | Manually trigger a schedule | Cloud |
| `orch schedule info` | View schedule details and events | - |
| `orch schedule runs` | View schedule run history | - |
| `orch service deploy` | Deploy agent as always-on service | Cloud (Cloud Run) |
| `orch service list` | List running services | - |
| `orch service logs` | View service logs | - |
| `orch service info` | Get service details | - |
| `orch service restart` | Restart a service | Cloud |
| `orch service delete` | Delete a service | Cloud |
| `orch service env set` | Set env vars on a running service | Cloud |
| `orch service env unset` | Remove env vars from a service | Cloud |
| `orch service env list` | List env vars on a service | - |
| `orch service secret add` | Attach workspace secrets | Cloud |
| `orch service secret remove` | Detach workspace secrets | Cloud |
| `orch diff <ref1> [ref2]` | Compare two agent versions | - |
| `orch pull <agent>` | Reconstruct a local project from a published agent | - |
| `orch fork <agent>` | Fork a public agent into your workspace | - |
| `orch billing balance` | Check credit balance | - |

### When to Use What

```
Want AI to DO something now?
  |-- Need it local/private? --> orch run --local
  \-- Want managed infra?    --> orch run

Want AI to KNOW something?
  \-- Download knowledge     --> orch skill install

Want to DELEGATE to sub-agents?
  \-- Export for AI tools    --> orch install

Want to RECONSTRUCT a local project?
  \-- Pull published source    --> orch pull

Want to CUSTOMIZE an existing agent?
  \-- Copy into your workspace --> orch fork
```

---

## Running Agents

### run

Execute an agent. By default, agents run on the cloud (E2B sandbox). Use `--local` to download and run on your machine instead.

```bash
# Run agent with a URL input
orch run joe/leak-finder https://github.com/user/repo

# Run with JSON input
orch run joe/summarizer --data '{"text": "..."}'

# Just download without running
orch run joe/leak-finder --download-only

# Auto-download all dependencies
orch run joe/security-review --with-deps https://github.com/user/repo

# Override LLM provider and model
orch run joe/summarizer --data '{"text":"..."}' --provider openai --model gpt-4o-mini
```

**Options:**

| Flag | Description |
|------|-------------|
| `--data <json>` | JSON payload (string or @file, @- for stdin) |
| `--local` | Run on your machine instead of cloud |
| `--file <path>` | Pass file content to agent (repeatable for multiple files) |
| `--file-field <name>` | Schema field to map file content to (auto-detected if omitted) |
| `--provider <name>` | LLM provider (openai, anthropic, gemini, ollama) |
| `--model <model>` | LLM model to use (overrides agent default) |
| `--download-only` | Download agent without executing |
| `--with-deps` | Auto-download all dependencies |
| `--endpoint <name>` | Override agent endpoint |
| `--output <file>` | Save response to file |
| `--json` | Raw JSON output |
| `--skills <refs>` | Add skills (comma-separated) |

**What happens (cloud, default):**

1. CLI sends request to gateway (`api.orchagent.io`)
2. Gateway spins up an E2B sandbox (ephemeral, isolated)
3. Agent runs with your stored LLM keys
4. Response returned through gateway

**What happens (with `--local`):**

1. CLI downloads agent code from orchagent registry
2. Agent runs locally on your machine
3. Agent calls LLM API using YOUR environment keys
4. Results returned to terminal

**When to use `--local`:**

- Development and testing
- Keep data on your machine (privacy)
- Try agents without an account
- Debug agent behavior

**Requirements for `--local`:**

- LLM API key in environment (`OPENAI_API_KEY`, `ANTHROPIC_API_KEY`, etc.)
- Agent must be downloadable (has `source_url` in manifest)

<Note>
**Dependency handling:** If an agent has dependencies, the CLI prompts you to choose between server execution or downloading available dependencies. Use `--with-deps` to auto-download.
</Note>

### call (deprecated)

<Note>
The `call` command has been merged into `run`. Cloud execution is now the default behavior of `orch run`. All `orch call` invocations should be replaced with `orch run`. For local execution, use `orch run --local`.
</Note>

```bash
# Old (deprecated):
# orch call acme/invoice-scanner invoice.pdf

# New (equivalent):
orch run acme/invoice-scanner invoice.pdf

# Old (deprecated):
# orch call acme/text-extractor --data '{"text":"hello world"}'

# New (equivalent):
orch run acme/text-extractor --data '{"text":"hello world"}'
```

All flags that worked with `call` now work with `run` (e.g., `--data`, `--file`, `--file-field`, `--endpoint`, `--output`, `--json`, `--skills`, `--provider`, `--model`).

---

## Installing Agents as Sub-Agents

### install

Export an agent as a sub-agent for AI coding tools (Claude Code, Cursor, etc.). This writes configuration files that your AI tool reads.

```bash
# Install to home directory (available in all projects)
orch install joe/code-reviewer

# Install to current project only
orch install joe/code-reviewer --scope project

# Same as --scope user (matches skill install syntax)
orch install joe/code-reviewer --global

# Specify format (default: claude-code)
orch install joe/code-reviewer --format cursor

# Install to multiple formats
orch install joe/code-reviewer --format claude-code,cursor

# Preview what would be installed
orch install joe/code-reviewer --dry-run

# Specify version
orch install joe/code-reviewer@v2
```

**What happens:**

1. CLI downloads agent metadata from registry
2. Converts to target format (Claude Code, Cursor, AGENTS.md)
3. Writes configuration file to AI tool directory
4. Tracks installation for updates

**Install locations by format:**

| Format | User Scope (`--scope user`) | Project Scope (`--scope project`) |
|--------|----------------------------|----------------------------------|
| `claude-code` | `~/.claude/agents/` | `./.claude/agents/` |
| `cursor` | `~/.cursor/rules/` | `./.cursor/rules/` |
| `agents-md` | `~/AGENTS.md` | `./AGENTS.md` |

**When to use `install`:**

- You want Claude Code or Cursor to delegate tasks to specialized agents
- You want sub-agents available across all your projects
- You're building a team workflow with shared agents

<Tip>
**Set default format:** Run `orch config set default-format claude-code,cursor` to install to multiple formats automatically.
</Tip>

### update

Update installed agents to their latest versions.

```bash
# Update all installed agents
orch update

# Update specific agent
orch update joe/code-reviewer

# Check for updates without installing
orch update --check

# Force update even if locally modified
orch update --force
```

**What happens:**

1. CLI reads `~/.orchagent/installed.json` to find installed agents
2. Checks registry for newer versions
3. Downloads and writes updated files
4. Preserves local modifications (unless `--force`)

<Note>
If you've manually edited an installed agent file, `orch update` will skip it to preserve your changes. Use `--force` to overwrite.
</Note>

### formats

List available export formats for agents.

```bash
# List formats
orch formats

# JSON output
orch formats --json
```

**Example output:**

```
Available export formats:

  claude-code    Claude Code Sub-Agent
                 Supports: agent, skill
                 Format version: 2026-01
                 user: ~/.claude/agents/
                 project: ./.claude/agents/

  cursor         Cursor Rules
                 Supports: agent, skill
                 Format version: 2026-01
                 user: ~/.cursor/rules/
                 project: ./.cursor/rules/

  agents-md      AGENTS.md (Universal)
                 Supports: agent, skill
                 Format version: 1.0
                 project: ./AGENTS.md

Use with: orch install <agent> --format <id>
Set default: orch config set default-format <ids>
```

---

## Working with Skills

Skills are passive knowledge files that enhance AI tools. Install them locally to give your AI assistant domain expertise.

### skill install

Install a skill to your local AI tool directories.

```bash
# Install to current directory (project-specific)
orch skill install yourorg/react-best-practices

# Install to home directory (global)
orch skill install yourorg/react-best-practices --global

# Specify version
orch skill install yourorg/react-best-practices@v2

# Specify format(s)
orch skill install yourorg/react-best-practices --format claude-code,cursor
```

**Install locations (current directory):**
```
./.claude/skills/react-best-practices.md
./.cursor/skills/react-best-practices.md
./.codex/skills/react-best-practices.md
./.agent/skills/react-best-practices.md
```

**Install locations (with `--global`):**
```
~/.claude/skills/react-best-practices.md
~/.cursor/skills/react-best-practices.md
~/.codex/skills/react-best-practices.md
~/.agent/skills/react-best-practices.md
```

### Using Skills with Agents

When running orchagent agents, you can compose skills:

```bash
# Add skills to an agent run
orch run acme/code-reviewer code.py --skills yourorg/react-best-practices

# Use ONLY specific skills (ignore agent's default_skills)
orch run acme/code-reviewer code.py --skills-only yourorg/react-rules

# Ignore all skills
orch run acme/code-reviewer code.py --no-skills
```

---

## Authentication

### login

Authenticate and store your API key.

```bash
# Interactive mode (recommended)
orch login

# Non-interactive mode (for CI/CD)
orch login --key sk_live_xxx
```

<Warning>
The `--key` flag exposes the key in shell history. For CI/CD, use the `ORCHAGENT_API_KEY` environment variable instead.
</Warning>

### whoami

Show current user and organization info.

```bash
orch whoami
```

---

## Workspaces

Workspaces let you organize agents by team, share agents privately, and manage billing.

### How Workspaces Affect Commands

When you set an active workspace, CLI commands will look for agents there by default:

```bash
# Set active workspace
orch workspace use marketing-team

# These now look in marketing-team workspace:
orch run my-agent --data '{}'         # → marketing-team/my-agent
orch run --local my-agent --input '{}' # → marketing-team/my-agent
orch install my-agent                 # → marketing-team/my-agent
orch skill install my-skill           # → marketing-team/my-skill

# Explicit org always overrides workspace:
orch run other-team/my-agent --data '{}' # → other-team/my-agent
```

**Resolution order:** Explicit `org/agent` → Active workspace → Default org (from login)

### workspace list

```bash
# List workspaces (→ marks active)
orch workspace list

# JSON output
orch workspace list --json
```

### workspace create

```bash
# Create a workspace (slug auto-generated)
orch workspace create "My Team"

# Create with custom slug
orch workspace create "My Team" --slug my-team
```

### workspace use

Set the active workspace for agent lookups.

```bash
orch workspace use my-team
```

After this, `orch run agent` will look for `my-team/agent`.

### workspace members

```bash
# List members of current workspace
orch workspace members

# List members of specific workspace
orch workspace members my-team
```

### workspace invite

```bash
# Invite with default role (member)
orch workspace invite alice@example.com

# Invite as owner
orch workspace invite alice@example.com --role owner
```

### workspace leave

```bash
orch workspace leave
```

---

## Agent Development

### init

Initialize a new agent or skill project.

```bash
# Create an agent (default: direct LLM, on-demand)
orch init my-agent

# Create a JavaScript tool agent
orch init my-tool --type tool --language javascript

# Create a JavaScript Discord bot from template
orch init my-bot --template discord-js

# Create an agent with a specific run mode
orch init my-agent --run-mode always_on

# Create a skill
orch init my-skill --type skill

# Initialize in the current directory (no subdirectory created)
orch init
```

**Options:**

| Flag | Description |
|------|-------------|
| `--type <type>` | `agent` (default) or `skill`. Legacy values `prompt`, `tool`, `agentic` are accepted for compatibility. |
| `--run-mode <mode>` | `on_demand` (default) or `always_on` |
| `--language <lang>` | `python` (default) or `javascript`. Scaffolds `main.js` + `package.json` instead of `main.py` + `requirements.txt`. |
| `--template <name>` | Start from a template: `support-agent`, `discord`, `discord-js`, `github-weekly-summary` |

When a name is provided, `init` creates a subdirectory with that name and writes all files there. Without a name, files are written to the current directory.

The generated `orchagent.json` always uses `"type": "agent"` with the canonical `run_mode` field.

<Note>
`--language javascript` is supported for tool/code-runtime agents. Managed loop agents (agent-type with `loop` config) currently require Python — the managed loop runner is Python-only.
</Note>

### publish

Publish an agent or skill from the current directory.

```bash
# Preview what would be published
orch publish --dry-run

# Publish your agent
orch publish

# Publish with default skills
orch publish --skills yourorg/style@v1,yourorg/rules@v1

# Publish with local download enabled (allows orch run --local)
orch publish --local-download
```

The publish command canonicalizes the manifest type, infers the `execution_engine` from your `runtime`/`loop` declarations, and validates all fields. The dry-run output shows: Type, Run mode, Execution engine, Callable, Providers, and Visibility.

### pull

Reconstruct a local agent project from a published version. This is the reverse of `orch publish` — it downloads agent metadata and reconstructs `orchagent.json`, `prompt.md`, `schema.json`, and code bundle files into a local directory.

```bash
# Pull an agent into a local directory
orch pull acme/my-agent

# Pull a specific version
orch pull acme/my-agent@v2

# Pull using short ref (uses workspace/default-org)
orch pull my-agent

# Pull into a custom directory
orch pull acme/my-agent --output ./custom-dir

# Overwrite an existing directory
orch pull acme/my-agent --overwrite

# Machine-readable output (still writes files)
orch pull acme/my-agent --json
```

**Options:**

| Flag | Description |
|------|-------------|
| `-o, --output <path>` | Output directory (default: `./<agent-name>/`) |
| `--overwrite` | Replace existing output directory contents |
| `--json` | Print machine-readable result summary (files are still written) |

**What happens:**

1. CLI resolves the agent from the public registry (or falls back to authenticated owner/private lookup)
2. Reconstructs `orchagent.json` manifest with canonical fields
3. Writes `prompt.md` if the agent has a prompt (direct LLM and managed loop engines)
4. Writes `schema.json` if input or output schemas exist
5. For code runtime agents, downloads and extracts the code bundle
6. Prints a summary of written files

**Agent resolution:**

The CLI resolves agent refs using the same fallback logic as `run`:

1. Tries the public download endpoint first
2. If the agent is server-only (403) and you're the owner, falls back to authenticated access
3. If the agent is private (404) and you're authenticated, resolves from your own agents

**When to use:**

- Reconstruct a local project from a published agent (e.g., lost source, new machine)
- Review the contents of a published agent version
- Set up a local development environment from a deployed agent

**Requirements:**

- No login required for public, source-available agents
- Login required for private agents or server-only agents you own

<Note>
`pull` is for agents only. If the target is a skill, you'll be directed to use `orch skill install` instead.
</Note>

### delete

Delete an agent or skill you own. By default, deletes the latest version only. Requires the full `org/agent` reference. Use the `@version` syntax to delete a specific version.

```bash
# Delete latest version (prompts for confirmation)
orch delete yourorg/my-agent

# Delete a specific version
orch delete yourorg/my-agent@v2

# Skip confirmation prompt
orch delete yourorg/my-agent -y

# Preview what would be deleted
orch delete yourorg/my-agent --dry-run
```

**Options:**

| Flag | Description |
|------|-------------|
| `-y, --yes` | Skip confirmation prompt |
| `--dry-run` | Show what would be deleted without making changes |

Deleted data is retained for 30 days before permanent removal.

### fork

Fork a public, source-available agent into your workspace. This creates a private copy you can customize and deploy independently.

```bash
# Fork latest version into your current workspace
orch fork orchagent/my-discord-agent

# Fork a specific version into a target workspace
orch fork orchagent/my-discord-agent@v2 --workspace acme-corp

# Fork with a custom name
orch fork orchagent/my-discord-agent --name customer-support-bot

# JSON output for scripting
orch fork orchagent/my-discord-agent --json
```

**Options:**

| Flag | Description |
|------|-------------|
| `--name <new-name>` | Rename the forked agent |
| `-w, --workspace <slug>` | Target workspace slug (default: current workspace) |
| `--json` | Raw JSON output |

**What happens:**

1. CLI resolves the source agent from the public registry
2. If `--workspace` is specified, resolves and verifies workspace membership
3. Creates a private copy in the target workspace via `POST /agents/{id}/fork`
4. Returns the new agent reference and a service key (if the agent has dependencies)

**What gets copied:**

The fork copies everything needed to customize and deploy: name, description, tags, type, prompt, schemas, manifest, code bundle, default skills, supported providers, default models, timeout, and execution config. The forked agent resets to **private** (`is_public = false`) and records a `forked_from` link to the source.

**Not copied:** run history, deploy state, schedules, stats, or services.

**When to use:**

- Start from a template instead of building from scratch
- Customize an existing public agent for your team
- Copy an agent into a different workspace

**Requirements:**

- Must be logged in (`orch login`)
- Source agent must be public and source-available (`allow_local_download = true`)
- `--workspace` requires browser-auth login (`orch login` without `--key`) so workspace membership can be verified

<Note>
If a name collision occurs in the target workspace, the server auto-increments the version number.
</Note>

### test

Run tests for your agent locally. Supports Python (pytest), JavaScript/TypeScript (vitest/npm test), and fixture-based testing for direct LLM agents.

```bash
# Run tests in current directory
orch test

# Run tests in a specific directory
orch test ./my-agent

# Verbose output
orch test --verbose

# Watch mode - re-run on file changes
orch test --watch
```

**Options:**

| Flag | Description |
|------|-------------|
| `-v, --verbose` | Show detailed test output |
| `-w, --watch` | Watch for file changes and re-run tests |

**Test Discovery:**

The CLI automatically discovers tests based on file patterns:

| Type | Patterns |
|------|----------|
| Python | `test_*.py`, `*_test.py` |
| JavaScript/TypeScript | `*.test.ts`, `*.test.js`, `*.spec.ts`, `*.spec.js` |
| Fixtures | `tests/fixture-*.json` (for direct LLM agents) |

**Fixture Format:**

For direct LLM agents, create fixture files in `tests/` to test your prompts against an LLM:

```json
{
  "input": {"text": "Hello world"},
  "expected_output": {"greeting": "Hello!"},
  "expected_contains": ["Hello"],
  "description": "Tests greeting response"
}
```

| Field | Required | Description |
|-------|----------|-------------|
| `input` | Yes | Input data passed to the prompt |
| `expected_output` | No* | Exact match comparison (deep equality) |
| `expected_contains` | No* | Substrings that must appear in output |
| `description` | No | Human-readable test description |

*At least one of `expected_output` or `expected_contains` is required.

**Requirements for fixture tests:**

- LLM API key in environment (`OPENAI_API_KEY`, `ANTHROPIC_API_KEY`, etc.)
- A `prompt.md` or `SKILL.md` file in the agent directory

<Tip>
Watch mode works on all platforms (macOS, Linux, Windows) and automatically picks up new test files as you create them.
</Tip>

### diff

Compare two versions of an agent side-by-side. Shows changes in type, description, schemas, providers, dependencies, skills, custom tools, prompt, and configuration fields.

```bash
# Compare two specific versions
orch diff yourorg/my-agent@v1 v2

# Compare against latest
orch diff yourorg/my-agent@v1

# Compare two different agents
orch diff yourorg/agent-a@v1 otherorg/agent-b@v1

# JSON output for scripting
orch diff yourorg/my-agent@v1 v2 --json
```

**Options:**

| Flag | Description |
|------|-------------|
| `--json` | Output diff as JSON with `from`, `to`, `identical`, and `changes` fields |

**Output format:**

Changes are shown with prefixes indicating the type of change:

- `+` — field was added
- `-` — field was removed
- `~` — field was changed (shows old and new values)

Schema and prompt changes show field-level diffs with added/removed lines.

**Version shorthand:**

The second argument can be just a version string (e.g., `v2`) — the org and agent name are inherited from the first argument. If the second argument is omitted, the first version is compared against `latest`.

---

## Configuration

### config

Manage CLI configuration.

```bash
# Set default export format(s)
orch config set default-format claude-code,cursor

# Set default scope
orch config set default-scope user

# Set default LLM provider (used when --provider flag is omitted)
orch config set default-provider gemini

# Get current value
orch config get default-format

# List all config values
orch config list
```

### llm-config

Set default LLM configuration for server-side execution.

```bash
orch llm-config --endpoint https://api.openai.com/v1 --model gpt-4o-mini --api-key sk-...
```

### Config File

The CLI stores configuration at `~/.orchagent/config.json`:

```json
{
  "api_key": "sk_live_xxx",
  "api_url": "https://api.orchagent.io",
  "default_org": "myorg",
  "workspace": "optional-workspace-slug",
  "profiles": {
    "staging": {
      "api_key": "sk_staging_xxx",
      "api_url": "https://staging.api.orchagent.io"
    }
  },
  "default_formats": ["claude-code", "cursor"],
  "default_scope": "user"
}
```

| Field | Description |
|-------|-------------|
| `api_key` | Your orchagent API key |
| `api_url` | API base URL (default: `https://api.orchagent.io`) |
| `default_org` | Default org from login (personal workspace) |
| `workspace` | Active workspace (set via `orch workspace use`) |
| `profiles` | Named profiles with their own api_key and api_url |
| `default_formats` | Default export formats for `orch install` |
| `default_scope` | Default install scope: `"user"` or `"project"` |

**Agent resolution:** When you run `orch run agent`, the CLI looks for the agent in this order:
1. Explicit org if provided (`org/agent`)
2. Active `workspace` if set
3. `default_org` (your personal workspace)

### Environment Variables

| Variable | Description |
|----------|-------------|
| `ORCHAGENT_API_KEY` | API key (preferred for CI/CD) |
| `ORCHAGENT_API_URL` | API base URL |
| `ORCHAGENT_DEFAULT_ORG` | Default org for agent lookups |

**Resolution order:** Command-line flags > Environment variables > Config file > Defaults

---

## Diagnostics

### doctor

Diagnose CLI setup issues.

```bash
# Check your setup
orch doctor

# Show extra details
orch doctor --verbose

# JSON output
orch doctor --json
```

**Checks performed:**

- Environment (Node.js, CLI version, Git)
- Configuration (config file, permissions)
- Connectivity (gateway reachable, latency)
- Authentication (API key valid)
- LLM Configuration (keys configured)

---

## Scheduling

Automate agent execution with cron schedules or webhooks. See the full [Scheduling & Webhooks](/using-agents/scheduling) guide for detailed usage and examples.

### schedule list

List schedules in your workspace.

```bash
# List all schedules
orch schedule list

# Filter by agent name
orch schedule list --agent report-generator

# Filter by type
orch schedule list --type cron

# JSON output
orch schedule list --json
```

**Options:**

| Flag | Description |
|------|-------------|
| `--workspace <slug>` | Workspace slug (default: current workspace) |
| `--agent <name>` | Filter by agent name |
| `--type <type>` | Filter by type: `cron` or `webhook` |
| `--json` | Output as JSON |

### schedule create

Create a cron or webhook schedule for an agent.

```bash
# Cron schedule — daily at 9am UTC
orch schedule create acme/report-generator --cron "0 9 * * *"

# Cron schedule with timezone and input
orch schedule create acme/report-generator \
  --cron "0 9 * * 1-5" \
  --timezone "America/New_York" \
  --input '{"format": "pdf"}'

# Webhook schedule
orch schedule create acme/github-processor --webhook
```

**Options:**

| Flag | Description |
|------|-------------|
| `--cron <expression>` | Cron expression (required unless `--webhook`) |
| `--webhook` | Create webhook schedule instead of cron |
| `--timezone <tz>` | Timezone for cron (default: `UTC`) |
| `--input <json>` | Input data as JSON string |
| `--provider <provider>` | LLM provider: `anthropic`, `openai`, `gemini` |
| `--workspace <slug>` | Workspace slug (default: current workspace) |

<Note>
Webhook URLs contain a secret token and are shown only once at creation time. Save the URL immediately.
</Note>

### schedule update

Update an existing schedule.

```bash
# Change cron expression
orch schedule update <schedule-id> --cron "0 10 * * 1"

# Disable a schedule
orch schedule update <schedule-id> --disable

# Re-enable
orch schedule update <schedule-id> --enable

# Update timezone and input
orch schedule update <schedule-id> \
  --timezone "America/Los_Angeles" \
  --input '{"threshold": 2000}'
```

**Options:**

| Flag | Description |
|------|-------------|
| `--cron <expression>` | New cron expression |
| `--timezone <tz>` | New timezone |
| `--input <json>` | New input data as JSON |
| `--provider <provider>` | New LLM provider |
| `--enable` | Enable the schedule |
| `--disable` | Disable the schedule |
| `--workspace <slug>` | Workspace slug (default: current workspace) |

### schedule delete

Delete a schedule permanently.

```bash
orch schedule delete <schedule-id>
```

| Flag | Description |
|------|-------------|
| `--workspace <slug>` | Workspace slug (default: current workspace) |

### schedule trigger

Manually trigger a schedule execution (useful for testing).

```bash
# Trigger with default input
orch schedule trigger <schedule-id>

# Trigger with input override
orch schedule trigger <schedule-id> --input '{"test": true}'
```

| Flag | Description |
|------|-------------|
| `--input <json>` | Override input data for this execution |
| `--workspace <slug>` | Workspace slug (default: current workspace) |

### schedule info

View schedule details and recent events.

```bash
# View schedule details
orch schedule info <schedule-id>

# JSON output
orch schedule info <schedule-id> --json
```

| Flag | Description |
|------|-------------|
| `--workspace <slug>` | Workspace slug (default: current workspace) |
| `--json` | Output as JSON |

Shows schedule configuration, recent run history, and event timeline.

### schedule runs

View run history for a schedule.

```bash
# List recent runs
orch schedule runs <schedule-id>

# Filter by status
orch schedule runs <schedule-id> --status failed

# Limit results
orch schedule runs <schedule-id> --limit 50
```

| Flag | Description |
|------|-------------|
| `--status <status>` | Filter by status: `completed`, `failed`, `running`, `timeout` |
| `--limit <n>` | Number of runs to show (default: 20) |
| `--workspace <slug>` | Workspace slug (default: current workspace) |
| `--json` | Output as JSON |

---

## Services

Deploy agents as always-on services for long-running workloads like Discord bots, webhook listeners, or background workers. See the full [Services](/using-agents/services) guide for detailed usage and examples.

### service deploy

Deploy an agent as an always-on service.

```bash
# Deploy an agent as a service
orch service deploy acme/discord-bot

# Deploy with a custom service name
orch service deploy acme/discord-bot --name my-discord-bot

# Deploy with instance scaling
orch service deploy acme/discord-bot --min-instances 1 --max-instances 3

# Deploy with environment variables
orch service deploy acme/discord-bot \
  --env BOT_PREFIX="!" \
  --env LOG_LEVEL=debug

# Deploy with workspace secrets (for sensitive values)
orch service deploy acme/discord-bot \
  --secret DISCORD_TOKEN \
  --secret DATABASE_URL

# Deploy with a custom command and arguments
orch service deploy acme/worker --command python --arg worker.py --arg --verbose

# JSON output
orch service deploy acme/discord-bot --json
```

**Options:**

| Flag | Description |
|------|-------------|
| `--workspace <slug>` | Workspace slug (default: current workspace) |
| `--name <name>` | Custom service name (default: agent name) |
| `--min-instances <n>` | Minimum number of instances |
| `--max-instances <n>` | Maximum number of instances |
| `--env <KEY=value>` | Environment variable (repeatable) |
| `--secret <NAME>` | Workspace secret name (repeatable) |
| `--command <cmd>` | Override the default entrypoint command |
| `--arg <arg>` | Argument to pass to the command (repeatable) |
| `--json` | Output as JSON |

<Note>
Only agents with a `runtime.command` or `loop` config (i.e., code runtime or managed loop agents) are eligible for service deployment. Direct LLM agents cannot be deployed as services. Sensitive environment variables (e.g., API keys, tokens) are rejected by `--env` and must be passed using `--secret` instead.
</Note>

### service list

List services in your workspace.

```bash
# List all services
orch service list

# Filter by status
orch service list --status running

# JSON output
orch service list --json
```

**Options:**

| Flag | Description |
|------|-------------|
| `--workspace <slug>` | Workspace slug (default: current workspace) |
| `--status <status>` | Filter by service status |
| `--json` | Output as JSON |

### service info

Get service details and events.

```bash
# View service details
orch service info <service-id>

# JSON output
orch service info <service-id> --json
```

**Options:**

| Flag | Description |
|------|-------------|
| `--workspace <slug>` | Workspace slug (default: current workspace) |
| `--json` | Output as JSON |

### service logs

View service logs.

```bash
# View recent logs
orch service logs <service-id>

# Limit number of log lines
orch service logs <service-id> --limit 200

# View logs since a specific time
orch service logs <service-id> --since 2026-02-10T00:00:00Z

# JSON output
orch service logs <service-id> --json
```

**Options:**

| Flag | Description |
|------|-------------|
| `--workspace <slug>` | Workspace slug (default: current workspace) |
| `--limit <n>` | Number of log lines to return (default: 100, max: 500) |
| `--since <timestamp>` | Show logs since this time (ISO 8601 format) |
| `--json` | Output as JSON |

<Note>
Sensitive values in log output are automatically redacted.
</Note>

### service restart

Restart a service.

```bash
# Restart a service
orch service restart <service-id>

# JSON output
orch service restart <service-id> --json
```

**Options:**

| Flag | Description |
|------|-------------|
| `--workspace <slug>` | Workspace slug (default: current workspace) |
| `--json` | Output as JSON |

### service delete

Delete a service.

```bash
# Delete a service
orch service delete <service-id>

# JSON output
orch service delete <service-id> --json
```

**Options:**

| Flag | Description |
|------|-------------|
| `--workspace <slug>` | Workspace slug (default: current workspace) |
| `--json` | Output as JSON |

### service env set

Set or update environment variables on a deployed service. Merges with existing variables. Triggers a restart if the service is running.

```bash
# Set one variable
orch service env set my-bot DEPLOY_ENV=production

# Set multiple variables
orch service env set my-bot LOG_LEVEL=debug BATCH_SIZE=100

# With workspace
orch service env set my-bot FOO=bar --workspace acme-team
```

**Options:**

| Flag | Description |
|------|-------------|
| `--workspace <slug>` | Workspace slug (default: current workspace) |

### service env unset

Remove environment variables from a service. Triggers a restart if the service is running.

```bash
# Remove one variable
orch service env unset my-bot DEBUG_MODE

# Remove multiple
orch service env unset my-bot DEBUG_MODE VERBOSE
```

**Options:**

| Flag | Description |
|------|-------------|
| `--workspace <slug>` | Workspace slug (default: current workspace) |

### service env list

List current environment variables on a service.

```bash
orch service env list my-bot
```

Output:

```
DEPLOY_ENV=production
LOG_LEVEL=warn
```

**Options:**

| Flag | Description |
|------|-------------|
| `--workspace <slug>` | Workspace slug (default: current workspace) |

### service secret add

Attach workspace secrets to a service. Secrets are injected as environment variables at runtime. Triggers a restart if the service is running.

```bash
# Attach one secret
orch service secret add my-bot DISCORD_BOT_TOKEN

# Attach multiple
orch service secret add my-bot DISCORD_BOT_TOKEN DATABASE_URL
```

**Options:**

| Flag | Description |
|------|-------------|
| `--workspace <slug>` | Workspace slug (default: current workspace) |

### service secret remove

Detach workspace secrets from a service. Triggers a restart if the service is running.

```bash
orch service secret remove my-bot OLD_API_KEY
```

**Options:**

| Flag | Description |
|------|-------------|
| `--workspace <slug>` | Workspace slug (default: current workspace) |

---

## Billing & Credits

Manage platform credits and usage.

### billing balance

Check your current credit balance.

```bash
orch billing balance
```

### billing add

Add credits to your account via Stripe Checkout.

```bash
# Add $10 in credits (minimum $5)
orch billing add 10
```

### billing history

View your credit transaction history (top-ups, charges, refunds).

```bash
orch billing history
```

---

## Exit Codes

| Code | Meaning |
|------|---------|
| `0` | Success |
| `1` | General/unknown error |
| `2` | Authentication error |
| `3` | Permission denied |
| `4` | Not found |
| `5` | Invalid input |
| `6` | Rate limited |
| `7` | Timeout |
| `8` | Server error |
| `9` | Network error |

---

## Scripting Examples

```bash
# Capture response, see errors
result=$(orch run acme/scanner doc.pdf)

# Suppress errors, check exit code
orch run acme/scanner doc.pdf 2>/dev/null && echo "success"

# Process JSON output
orch run acme/scanner doc.pdf --json | jq '.data.total'

# Install agents in CI
orch install acme/code-reviewer --format claude-code --scope project
```
