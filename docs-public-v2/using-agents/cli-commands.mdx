---
title: "CLI Commands"
description: "Complete reference for the orchagent CLI"
---

# CLI Commands

The orchagent CLI lets you interact with the platform from your terminal.

## Installation

```bash
npm install -g @orchagent/cli
```

<Tip>
The CLI also installs `orch` as a shorthand alias. All commands work with either `orchagent` or `orch`.
</Tip>

## Commands Overview

| Command | Purpose |
|---------|---------|
| `orchagent login` | Authenticate and store API key |
| `orchagent whoami` | Show current user/org info |
| `orchagent search` | Search and discover agents and skills |
| `orchagent call <agent>` | Call an agent on the server |
| `orchagent run <agent>` | Download and run an agent locally |
| `orchagent skill install <skill>` | Install skill to local AI tool directories |
| `orchagent init` | Initialize agent or skill directory structure |
| `orchagent publish` | Publish agent or skill from local files |
| `orchagent star <agent>` | Star or unstar an agent or skill |
| `orchagent fork <agent>` | Fork a public agent or skill |
| `orchagent delete <agent>` | Delete an agent or skill |
| `orchagent llm-config` | Set default LLM config |
| `orchagent doctor` | Diagnose CLI setup issues |

## Authentication

### login

Authenticate and store your API key.

```bash
# Interactive mode (recommended)
orchagent login

# Non-interactive mode (for CI/CD)
orchagent login --key sk_live_xxx
```

<Warning>
The `--key` flag exposes the key in shell history. For CI/CD, use the `ORCHAGENT_API_KEY` environment variable instead.
</Warning>

### whoami

Show current user and organization info.

```bash
orchagent whoami
```

## Discovery

### search

Search and discover agents and skills. This is the primary way to find what's available on the platform.

```bash
# Search by keyword
orchagent search invoice

# Show top agents/skills by stars
orchagent search --popular

# Show most recently published
orchagent search --recent

# Filter to agents only
orchagent search invoice --type agents

# Filter to skills only
orchagent search react --type skills

# Limit results (default: 20)
orchagent search invoice --limit 50

# JSON output for scripting
orchagent search invoice --json
```

<Tip>
For browsing all agents and skills, visit [orchagent.io/explore](https://orchagent.io/explore).
</Tip>

## Calling Agents

### call

Call an agent on orchagent's servers.

```bash
# Call with file
orchagent call acme/invoice-scanner invoice.pdf

# Agent name only (uses default_org from config)
orchagent call invoice-scanner invoice.pdf

# Pipe input via stdin
cat document.pdf | orchagent call acme/pdf-parser

# JSON payload
orchagent call acme/text-extractor --data '{"text":"hello world"}'

# JSON from file
orchagent call acme/text-extractor --data @input.json

# Specify version (default: v1)
orchagent call acme/invoice-scanner@v2 invoice.pdf

# Override endpoint
orchagent call acme/invoice-scanner invoice.pdf --endpoint extract

# JSON output for scripts
orchagent call acme/invoice-scanner invoice.pdf --json

# Save response to file
orchagent call acme/image-processor photo.jpg --output result.png

# Pass tenant ID (multi-tenant callers)
orchagent call acme/invoice-scanner invoice.pdf --tenant customer-123

# Multiple files
orchagent call acme/batch-processor --file doc1.pdf --file doc2.pdf

# Files with metadata
orchagent call acme/invoice-scanner --file invoice.pdf --metadata '{"format":"detailed"}'

# Compose with skills (add skill knowledge to the agent)
orchagent call acme/code-reviewer code.py --skills yourorg/react-best-practices

# Use only specific skills (ignore agent's default_skills)
orchagent call acme/code-reviewer code.py --skills-only yourorg/react-best-practices

# Ignore all skills (even if agent has default_skills)
orchagent call acme/code-reviewer code.py --no-skills
```

**Input handling:**

- `--data` provided: sends JSON (`application/json`)
- File argument provided: reads file, sends as `multipart/form-data`
- `--file` provided: sends files as `multipart/form-data` with `files[]` array
- `--metadata` provided: adds JSON metadata field to multipart request
- No file but stdin has data: reads stdin, sends as `multipart/form-data`
- Neither: sends empty request body

### run

Download and run an agent locally (no server execution).

```bash
# Run a code agent locally
orchagent run joe/leak-finder https://github.com/user/repo

# Run a prompt-based agent with JSON input
orchagent run joe/summarizer --input '{"text": "..."}'

# Just download without running
orchagent run joe/leak-finder --download-only

# Auto-download all dependencies
orchagent run joe/security-review --with-deps https://github.com/user/repo
```

**Dependency handling for orchestrator agents:**

When running an agent that has dependencies, the CLI prompts:

```
$ orchagent run joe/security-review .

Checking dependencies...

This agent has dependencies:
  joe/leak-finder@v1 (downloadable)
  joe/vuln-scanner@v1 (downloadable)
  acme/premium-scan@v1 (cloud-only)

Options:
  [1] Run on server (orchagent call) - recommended
  [2] Download 2 available deps, run locally
  [3] Cancel

Choose [1/2/3]:
```

Use `--with-deps` to skip the prompt and auto-download all available dependencies.

## Skills

Skills are passive knowledge (instructions, rules, guidelines) that enhance agents. Install them locally for use with any AI coding tool (Claude Code, Cursor, Codex, etc.).

### Finding Skills

Use the search command with the `--type skills` filter:

```bash
# Search for skills
orchagent search react --type skills

# Show popular skills
orchagent search --popular --type skills

# Show recent skills
orchagent search --recent --type skills
```

### skill install

Install a skill to your local AI tool directories. This writes the skill to multiple locations so it works with Claude Code, Cursor, Codex, and other AI coding tools.

```bash
# Install to current directory (project-specific)
orchagent skill install yourorg/react-best-practices

# Install to home directory (global)
orchagent skill install yourorg/react-best-practices --global

# Specify version
orchagent skill install yourorg/react-best-practices@v2
```

**Install locations (current directory):**
```
./.claude/skills/react-best-practices.md
./.cursor/skills/react-best-practices.md
./.codex/skills/react-best-practices.md
./.agent/skills/react-best-practices.md
```

**Install locations (with `--global`):**
```
~/.claude/skills/react-best-practices.md
~/.cursor/skills/react-best-practices.md
~/.codex/skills/react-best-practices.md
~/.agent/skills/react-best-practices.md
```

The skill is saved in standard markdown format, compatible with the [Agent Skills specification](https://agentskills.io).

### Using Skills with OrchAgent Agents

When calling OrchAgent agents, you can pass skills via flags:

```bash
# Add skills to an agent call
orchagent call acme/code-reviewer code.py --skills yourorg/react-best-practices

# Use ONLY specific skills (ignore agent's default_skills)
orchagent call acme/code-reviewer code.py --skills-only yourorg/react-rules

# Ignore all skills
orchagent call acme/code-reviewer code.py --no-skills
```

Agent authors can also define `default_skills` in their agent manifest - these are automatically injected when the agent runs.

## Social Features

### star

Star or unstar an agent.

```bash
orchagent star acme/invoice-scanner
```

### fork

Fork a public agent to your account.

```bash
orchagent fork acme/invoice-scanner
```

### delete

Delete an agent or skill you own. Uses soft delete - data is retained for 30 days before permanent deletion.

```bash
# Delete an agent (prompts for confirmation)
orchagent delete my-agent

# Delete specific version
orchagent delete my-agent --version v2

# Skip confirmation prompt
orchagent delete my-agent --yes
```

<Warning>
For agents with 10+ stars or 1+ forks, you must type the agent name to confirm deletion (similar to GitHub repository deletion).
</Warning>

**What happens when you delete:**
- The agent is hidden from searches and listings immediately
- Stars, execution logs, and service keys are deleted
- Forked agents remain but their `forked_from` reference becomes null
- Data is permanently deleted after 30 days

## Agent Development

### init

Initialize a new agent or skill directory.

```bash
# Initialize a prompt-based agent
orchagent init --type prompt

# Initialize a code-based agent
orchagent init --type code

# Initialize a skill
orchagent init --type skill
```

### publish

Publish an agent or skill from the current directory.

```bash
# Publish as public
orchagent publish --public

# Publish as private (requires paid plan)
orchagent publish

# Dry run to preview bundle (code agents)
orchagent publish --dry-run

# Override entrypoint for code agents
orchagent publish --entrypoint custom.py
```

The CLI auto-detects the type:
- If `SKILL.md` exists → publishes as skill
- If `orchagent.json` exists → publishes as agent (prompt or code based on config)

**Code agent bundling:**

For code-based agents, `orchagent publish` automatically:
1. Detects your entrypoint (`main.py`, `index.js`, etc.)
2. Bundles your code into a ZIP file
3. Excludes `__pycache__/`, `node_modules/`, `.git/`, `.env`, `venv/`
4. Uploads to the platform (25MB max)

### llm-config

Set default LLM configuration for prompt agents.

```bash
orchagent llm-config --endpoint https://api.openai.com/v1 --model gpt-4.1-mini --api-key sk-...
```

## Diagnostics

### doctor

Diagnose CLI setup issues. Run this first when troubleshooting.

```bash
# Check your setup
orchagent doctor

# Show extra details
orchagent doctor --verbose

# JSON output (for CI/CD)
orchagent doctor --json
```

**Checks performed:**
- **Environment** - Node.js version, CLI version, Git availability
- **Configuration** - Config file exists, file permissions
- **Connectivity** - Gateway reachable, response latency
- **Authentication** - API key configured and valid
- **LLM Configuration** - Server and local LLM keys

<Tip>
Exit code is `0` when all checks pass, `1` when warnings or errors are found. Use this in CI/CD pipelines.
</Tip>

## Configuration

Config is stored at `~/.orchagent/config.json`:

```json
{
  "api_key": "sk_live_xxx",
  "api_url": "https://api.orchagent.io",
  "default_org": "acme"
}
```

### Environment Variables

Environment variables override config file values:

| Variable | Description |
|----------|-------------|
| `ORCHAGENT_API_KEY` | API key (preferred for CI/CD) |
| `ORCHAGENT_API_URL` | API base URL |
| `ORCHAGENT_DEFAULT_ORG` | Default org for agent lookups |

### Resolution Order

1. Command-line flags
2. Environment variables
3. Config file
4. Built-in defaults

## Output Modes

### Human Mode (Default)

```
$ orchagent search --popular

Name                    Author    Category
--------------------------------------------
invoice-scanner         acme      Document Processing
billing-doc-analyzer    acme      Document Processing
pdf-parser              tools     Utilities
```

### JSON Mode

```bash
orchagent search --popular --json
```

```json
[
  {"name": "invoice-scanner", "org": "acme", "category": "Document Processing"}
]
```

## Exit Codes

| Code | Meaning |
|------|---------|
| `0` | Success |
| `1` | General/unknown error |
| `2` | Authentication error |
| `3` | Permission denied |
| `4` | Not found |
| `5` | Invalid input |
| `6` | Rate limited |
| `7` | Timeout |
| `8` | Server error |
| `9` | Network error |

## Scripting

The CLI is designed for Unix-style scripting:

```bash
# Capture response, see errors
result=$(orchagent call acme/scanner doc.pdf)

# Suppress errors, check exit code
orchagent call acme/scanner doc.pdf 2>/dev/null && echo "success"

# Process JSON output
orchagent call acme/scanner doc.pdf --json | jq '.data.total'
```
