---
title: "CLI Commands"
description: "Complete reference for the orchagent CLI"
---

The orchagent CLI lets you interact with the platform from your terminal.

## Installation

```bash
npm install -g @orchagent/cli
```

<Tip>
The CLI also installs `orch` as a shorthand alias. All commands work with either `orchagent` or `orch`.
</Tip>

---

## Understanding Agents vs Skills

Before diving into commands, understand the two types of content on orchagent:

| | Agents | Skills |
|---|--------|--------|
| **What they are** | Active executors that DO things | Passive knowledge that TEACHES things |
| **Purpose** | Execute tasks and return results | Provide context, rules, guidelines |
| **Example** | `code-reviewer` analyzes your code | `react-best-practices` teaches React patterns |
| **How to use** | `run`, `call`, or `install` | `skill install` |

**Simple rule:**
- Want AI to **DO** something? Use an **agent**
- Want AI to **KNOW** something? Use a **skill**

---

## Quick Reference

| Command | What It Does | Where It Runs |
|---------|--------------|---------------|
| `orch run <agent>` | Download and execute agent | Your machine |
| `orch call <agent>` | Execute agent via API | Cloud (E2B sandbox) |
| `orch install <agent>` | Export agent as sub-agent | Local files (for AI tools) |
| `orch skill install <skill>` | Download skill files | Local files (for AI tools) |
| `orch update` | Update installed agents | - |
| `orch formats` | List available export formats | - |

### When to Use What

```
Want AI to DO something now?
  ├─ Need it local/private? → orch run
  └─ Want managed infra?    → orch call

Want AI to KNOW something?
  └─ Download knowledge     → orch skill install

Want to DELEGATE to sub-agents?
  └─ Export for AI tools    → orch install
```

---

## Running Agents

### run

Download and run an agent locally on your machine. No server execution.

```bash
# Run agent with a URL input
orch run joe/leak-finder https://github.com/user/repo

# Run with JSON input
orch run joe/summarizer --input '{"text": "..."}'

# Just download without running
orch run joe/leak-finder --download-only

# Auto-download all dependencies
orch run joe/security-review --with-deps https://github.com/user/repo
```

**What happens:**

1. CLI downloads agent code from orchagent registry
2. Agent runs locally on your machine
3. Agent calls LLM API using YOUR environment keys
4. Results returned to terminal

**When to use `run`:**

- Development and testing
- Keep data on your machine (privacy)
- Try agents without an account
- Debug agent behavior

**Requirements:**

- LLM API key in environment (`OPENAI_API_KEY`, `ANTHROPIC_API_KEY`, etc.)
- Agent must be downloadable (has `source_url` in manifest)

<Note>
**Dependency handling:** If an agent has dependencies, the CLI prompts you to choose between server execution or downloading available dependencies. Use `--with-deps` to auto-download.
</Note>

### call

Execute an agent on orchagent's cloud servers.

```bash
# Basic call with file
orch call acme/invoice-scanner invoice.pdf

# JSON payload
orch call acme/text-extractor --data '{"text":"hello world"}'

# JSON from file
orch call acme/text-extractor --data @input.json

# Pipe input via stdin
cat document.pdf | orch call acme/pdf-parser

# Specify version (default: v1)
orch call acme/invoice-scanner@v2 invoice.pdf

# Override endpoint
orch call acme/invoice-scanner invoice.pdf --endpoint extract

# JSON output for scripts
orch call acme/invoice-scanner invoice.pdf --json

# Save response to file
orch call acme/image-processor photo.jpg --output result.png

# Multiple files
orch call acme/batch-processor --file doc1.pdf --file doc2.pdf

# Compose with skills
orch call acme/code-reviewer code.py --skills yourorg/react-best-practices
```

**What happens:**

1. CLI sends request to gateway (`api.orchagent.io`)
2. Gateway spins up an E2B sandbox (ephemeral, isolated)
3. Agent runs with your stored LLM keys
4. Response returned through gateway

**When to use `call`:**

- Production integrations
- Agents with complex dependencies
- Managed infrastructure (auto-scaling, health checks)
- Usage tracking and logs

**Requirements:**

- orchagent account (free)
- API key from dashboard
- LLM key stored in account

---

## Installing Agents as Sub-Agents

### install

Export an agent as a sub-agent for AI coding tools (Claude Code, Cursor, etc.). This writes configuration files that your AI tool reads.

```bash
# Install to home directory (available in all projects)
orch install joe/code-reviewer

# Install to current project only
orch install joe/code-reviewer --scope project

# Specify format (default: claude-code)
orch install joe/code-reviewer --format cursor

# Install to multiple formats
orch install joe/code-reviewer --format claude-code,cursor

# Preview what would be installed
orch install joe/code-reviewer --dry-run

# Specify version
orch install joe/code-reviewer@v2
```

**What happens:**

1. CLI downloads agent metadata from registry
2. Converts to target format (Claude Code, Cursor, AGENTS.md)
3. Writes configuration file to AI tool directory
4. Tracks installation for updates

**Install locations by format:**

| Format | User Scope (`--scope user`) | Project Scope (`--scope project`) |
|--------|----------------------------|----------------------------------|
| `claude-code` | `~/.claude/agents/` | `./.claude/agents/` |
| `cursor` | `~/.cursor/rules/` | `./.cursor/rules/` |
| `agents-md` | `~/AGENTS.md` | `./AGENTS.md` |

**When to use `install`:**

- You want Claude Code or Cursor to delegate tasks to specialized agents
- You want sub-agents available across all your projects
- You're building a team workflow with shared agents

<Tip>
**Set default format:** Run `orch config set default-format claude-code,cursor` to install to multiple formats automatically.
</Tip>

### update

Update installed agents to their latest versions.

```bash
# Update all installed agents
orch update

# Update specific agent
orch update joe/code-reviewer

# Check for updates without installing
orch update --check

# Force update even if locally modified
orch update --force
```

**What happens:**

1. CLI reads `~/.orchagent/installed.json` to find installed agents
2. Checks registry for newer versions
3. Downloads and writes updated files
4. Preserves local modifications (unless `--force`)

<Note>
If you've manually edited an installed agent file, `orch update` will skip it to preserve your changes. Use `--force` to overwrite.
</Note>

### formats

List available export formats for agents.

```bash
# List formats
orch formats

# JSON output
orch formats --json
```

**Example output:**

```
Available export formats:

  claude-code    Claude Code Sub-Agent
                 Supports: prompt, skill agents
                 Format version: 2026-01
                 user: ~/.claude/agents/
                 project: ./.claude/agents/

  cursor         Cursor Rules
                 Supports: prompt, skill agents
                 Format version: 2026-01
                 user: ~/.cursor/rules/
                 project: ./.cursor/rules/

  agents-md      AGENTS.md (Universal)
                 Supports: prompt, skill agents
                 Format version: 1.0
                 project: ./AGENTS.md

Use with: orch install <agent> --format <id>
Set default: orch config set default-format <ids>
```

---

## Working with Skills

Skills are passive knowledge files that enhance AI tools. Install them locally to give your AI assistant domain expertise.

### skill install

Install a skill to your local AI tool directories.

```bash
# Install to current directory (project-specific)
orch skill install yourorg/react-best-practices

# Install to home directory (global)
orch skill install yourorg/react-best-practices --global

# Specify version
orch skill install yourorg/react-best-practices@v2

# Specify format(s)
orch skill install yourorg/react-best-practices --format claude-code,cursor
```

**Install locations (current directory):**
```
./.claude/skills/react-best-practices.md
./.cursor/skills/react-best-practices.md
./.codex/skills/react-best-practices.md
./.agent/skills/react-best-practices.md
```

**Install locations (with `--global`):**
```
~/.claude/skills/react-best-practices.md
~/.cursor/skills/react-best-practices.md
~/.codex/skills/react-best-practices.md
~/.agent/skills/react-best-practices.md
```

### Finding Skills

```bash
# Search for skills
orch search react --type skills

# Show popular skills
orch search --popular --type skills

# Show recent skills
orch search --recent --type skills
```

### Using Skills with Agents

When calling orchagent agents, you can compose skills:

```bash
# Add skills to an agent call
orch call acme/code-reviewer code.py --skills yourorg/react-best-practices

# Use ONLY specific skills (ignore agent's default_skills)
orch call acme/code-reviewer code.py --skills-only yourorg/react-rules

# Ignore all skills
orch call acme/code-reviewer code.py --no-skills
```

---

## Discovery

### search

Search and discover agents and skills.

```bash
# Search by keyword
orch search invoice

# Show top agents/skills by stars
orch search --popular

# Show most recently published
orch search --recent

# Filter to agents only
orch search invoice --type agents

# Filter to skills only
orch search react --type skills

# Limit results (default: 20)
orch search invoice --limit 50

# JSON output for scripting
orch search invoice --json
```

---

## Authentication

### login

Authenticate and store your API key.

```bash
# Interactive mode (recommended)
orch login

# Non-interactive mode (for CI/CD)
orch login --key sk_live_xxx
```

<Warning>
The `--key` flag exposes the key in shell history. For CI/CD, use the `ORCHAGENT_API_KEY` environment variable instead.
</Warning>

### whoami

Show current user and organization info.

```bash
orch whoami
```

---

## Workspaces

Workspaces let you organize team access, share agents privately, and manage billing.

### workspace list

```bash
# List workspaces
orch workspace list

# JSON output
orch workspace list --json
```

### workspace create

```bash
# Create a workspace (slug auto-generated)
orch workspace create "My Team"

# Create with custom slug
orch workspace create "My Team" --slug my-team
```

### workspace use

Set the default workspace for CLI operations.

```bash
orch workspace use my-team
```

### workspace members

```bash
# List members of current workspace
orch workspace members

# List members of specific workspace
orch workspace members my-team
```

### workspace invite

```bash
# Invite with default role (member)
orch workspace invite alice@example.com

# Invite as owner
orch workspace invite alice@example.com --role owner
```

### workspace leave

```bash
orch workspace leave
```

---

## Agent Development

### init

Initialize a new agent or skill directory.

```bash
# Initialize a prompt-based agent
orch init --type prompt

# Initialize a code-based agent
orch init --type code

# Initialize a skill
orch init --type skill
```

### publish

Publish an agent or skill from the current directory.

```bash
# Preview what would be published
orch publish --dry-run

# Publish as public
orch publish --public

# Publish as private (requires paid plan)
orch publish

# Publish with default skills
orch publish --skills yourorg/style@v1,yourorg/rules@v1
```

### delete

Delete an agent or skill you own.

```bash
# Preview what would be deleted
orch delete my-agent --dry-run

# Delete (prompts for confirmation)
orch delete my-agent

# Delete specific version
orch delete my-agent --version v2
```

---

## Configuration

### config

Manage CLI configuration.

```bash
# Set default export format(s)
orch config set default-format claude-code,cursor

# Set default scope
orch config set default-scope user

# Get current value
orch config get default-format
```

### llm-config

Set default LLM configuration for server-side execution.

```bash
orch llm-config --endpoint https://api.openai.com/v1 --model gpt-4o-mini --api-key sk-...
```

### Config File

The CLI stores configuration at `~/.orchagent/config.json`:

```json
{
  "api_key": "sk_live_xxx",
  "api_url": "https://api.orchagent.io",
  "default_org": "myorg",
  "workspace": "optional-workspace-slug",
  "profiles": {
    "staging": {
      "api_key": "sk_staging_xxx",
      "api_url": "https://staging.api.orchagent.io"
    }
  },
  "default_formats": ["claude-code", "cursor"]
}
```

| Field | Description |
|-------|-------------|
| `api_key` | Your orchagent API key |
| `api_url` | API base URL (default: `https://api.orchagent.io`) |
| `default_org` | Default organization for agent lookups |
| `workspace` | Optional workspace slug for team operations |
| `profiles` | Named profiles with their own api_key and api_url |
| `default_formats` | Default export formats for `orch install` |

### Environment Variables

| Variable | Description |
|----------|-------------|
| `ORCHAGENT_API_KEY` | API key (preferred for CI/CD) |
| `ORCHAGENT_API_URL` | API base URL |
| `ORCHAGENT_DEFAULT_ORG` | Default org for agent lookups |

**Resolution order:** Command-line flags > Environment variables > Config file > Defaults

---

## Diagnostics

### doctor

Diagnose CLI setup issues.

```bash
# Check your setup
orch doctor

# Show extra details
orch doctor --verbose

# JSON output
orch doctor --json
```

**Checks performed:**

- Environment (Node.js, CLI version, Git)
- Configuration (config file, permissions)
- Connectivity (gateway reachable, latency)
- Authentication (API key valid)
- LLM Configuration (keys configured)

---

## Social Features

### star

Star or unstar an agent.

```bash
orch star acme/invoice-scanner
```

### fork

Fork a public agent to your account.

```bash
orch fork acme/invoice-scanner
```

---

## Exit Codes

| Code | Meaning |
|------|---------|
| `0` | Success |
| `1` | General/unknown error |
| `2` | Authentication error |
| `3` | Permission denied |
| `4` | Not found |
| `5` | Invalid input |
| `6` | Rate limited |
| `7` | Timeout |
| `8` | Server error |
| `9` | Network error |

---

## Scripting Examples

```bash
# Capture response, see errors
result=$(orch call acme/scanner doc.pdf)

# Suppress errors, check exit code
orch call acme/scanner doc.pdf 2>/dev/null && echo "success"

# Process JSON output
orch call acme/scanner doc.pdf --json | jq '.data.total'

# Install agents in CI
orch install acme/code-reviewer --format claude-code --scope project
```
