{
  "branchName": "ralph/showcase-agents",
  "description": "Build 4 showcase agents for OrchAgent marketplace",
  "userStories": [
    {
      "id": "DS-001",
      "title": "Scaffold dep-scanner project structure",
      "acceptanceCriteria": [
        "Create dep-scanner/ directory",
        "Create orchagent.json with type=code",
        "Create pyproject.toml with fastapi, gitpython dependencies",
        "Create Dockerfile following leak-finder pattern",
        "Create src/dep_scanner/__init__.py"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Follow leak-finder structure exactly"
    },
    {
      "id": "DS-002",
      "title": "Create FastAPI app with /health and /scan endpoints",
      "acceptanceCriteria": [
        "Create src/dep_scanner/main.py with FastAPI app",
        "Add GET /health endpoint returning {status: ok}",
        "Add POST /scan endpoint (stub returning empty findings)",
        "Create src/dep_scanner/models.py with ScanRequest, ScanResponse models"
      ],
      "priority": 2,
      "passes": true,
      "notes": "See dep-scanner-agent.md for API schema"
    },
    {
      "id": "DS-003",
      "title": "Implement git clone to temp directory",
      "acceptanceCriteria": [
        "Create src/dep_scanner/git_utils.py",
        "Implement clone_repo(url) -> temp_dir function",
        "Handle cleanup of temp directory after scan",
        "Support both https and git@ URLs"
      ],
      "priority": 3,
      "passes": true,
      "notes": "Reference leak-finder/src/leak_finder/git_utils.py"
    },
    {
      "id": "DS-004",
      "title": "Implement npm audit scanning",
      "acceptanceCriteria": [
        "Create src/dep_scanner/scanners/npm.py",
        "Detect package.json in repo",
        "Run npm audit --json (or npm audit --json --package-lock-only)",
        "Parse output into Finding model format",
        "Include package, version, severity, cve, title, fixed_in, recommendation"
      ],
      "priority": 4,
      "passes": true,
      "notes": "npm audit returns JSON with vulnerabilities object"
    },
    {
      "id": "DS-005",
      "title": "Implement pip-audit scanning",
      "acceptanceCriteria": [
        "Create src/dep_scanner/scanners/pip.py",
        "Detect requirements.txt or pyproject.toml in repo",
        "Run pip-audit --format json",
        "Parse output into Finding model format",
        "Handle case where pip-audit is not installed gracefully"
      ],
      "priority": 5,
      "passes": true,
      "notes": "pip-audit may need to be in Dockerfile"
    },
    {
      "id": "DS-006",
      "title": "Create unified findings response model",
      "acceptanceCriteria": [
        "Update models.py with Finding model",
        "Add scan_id (uuid), detected_managers, findings list, summary",
        "Summary includes critical/high/medium/low counts",
        "Create scanner.py that orchestrates npm + pip scanners"
      ],
      "priority": 6,
      "passes": true,
      "notes": "See output schema in dep-scanner-agent.md"
    },
    {
      "id": "DS-007",
      "title": "Add severity filtering to dep-scanner",
      "acceptanceCriteria": [
        "Accept severity_threshold in request (low/medium/high/critical)",
        "Filter findings to only include >= threshold severity",
        "Default to 'low' (show all)",
        "Update summary counts to reflect filtered results"
      ],
      "priority": 7,
      "passes": true,
      "notes": ""
    },
    {
      "id": "DS-008",
      "title": "Add tests for dep-scanner",
      "acceptanceCriteria": [
        "Create tests/test_main.py",
        "Test /health endpoint",
        "Test /scan endpoint with mock git clone",
        "Test npm scanner parsing",
        "Test pip scanner parsing",
        "All tests pass with pytest"
      ],
      "priority": 8,
      "passes": true,
      "notes": "Add httpx to dev dependencies"
    },
    {
      "id": "CH-001",
      "title": "Create content-humanizer orchagent.json with prompt and schemas",
      "acceptanceCriteria": [
        "Create content-humanizer/ directory",
        "Create orchagent.json with type=prompt",
        "Include full system prompt from content-humanizer.md",
        "Define input_schema (text field, 10-10000 chars)",
        "Define output_schema (humanized_text field)",
        "Add tags: writing, ai-detection, content"
      ],
      "priority": 9,
      "passes": true,
      "notes": "Use the draft prompt from docs/newagents/content-humanizer.md"
    },
    {
      "id": "CH-002",
      "title": "Create content-humanizer README",
      "acceptanceCriteria": [
        "Create content-humanizer/README.md",
        "Include description of what it does",
        "Add example input/output",
        "Document supported providers",
        "Add usage instructions with curl example"
      ],
      "priority": 10,
      "passes": true,
      "notes": ""
    },
    {
      "id": "RR-001",
      "title": "Create roast-my-resume orchagent.json with prompt and intensity levels",
      "acceptanceCriteria": [
        "Create roast-my-resume/ directory",
        "Create orchagent.json with type=prompt",
        "Include full system prompt from roast-my-resume.md",
        "Define input_schema (resume_text, intensity enum)",
        "Define output_schema (roast, score, top_fix)",
        "Add tags: career, resume, feedback, humor"
      ],
      "priority": 11,
      "passes": true,
      "notes": "Intensity levels: light, medium, brutal, gordon-ramsay"
    },
    {
      "id": "RR-002",
      "title": "Create roast-my-resume README",
      "acceptanceCriteria": [
        "Create roast-my-resume/README.md",
        "Include description and purpose",
        "Document intensity levels with examples",
        "Add example input/output for each intensity",
        "Add curl usage example"
      ],
      "priority": 12,
      "passes": true,
      "notes": ""
    },
    {
      "id": "SR-001",
      "title": "Scaffold security-review project with manifest declaring dependencies",
      "acceptanceCriteria": [
        "Create security-review/ directory",
        "Create orchagent.json with type=code",
        "Include manifest with dependencies: orchagent/leak-finder@v1, orchagent/dep-scanner@v1",
        "Set max_hops=2, timeout_ms=180000",
        "Create pyproject.toml",
        "Create Dockerfile"
      ],
      "priority": 13,
      "passes": true,
      "notes": "See manifest format in security-review-agent.md"
    },
    {
      "id": "SR-002",
      "title": "Create FastAPI app with AgentClient integration",
      "acceptanceCriteria": [
        "Create src/security_review/main.py",
        "Add GET /health endpoint",
        "Add POST /review endpoint (stub)",
        "Create models.py with ReviewRequest, ReviewResponse",
        "Implement AgentClient for calling dependencies"
      ],
      "priority": 14,
      "passes": true,
      "notes": "AgentClient should call other OrchAgent agents via API"
    },
    {
      "id": "SR-003",
      "title": "Implement parallel calls to leak-finder and dep-scanner",
      "acceptanceCriteria": [
        "Use asyncio.gather to call both agents in parallel",
        "Pass repo_url to both agents",
        "Handle errors from either agent gracefully",
        "Combine results into unified findings structure"
      ],
      "priority": 15,
      "passes": true,
      "notes": "See orchestration pattern in docs/orchestration.md"
    },
    {
      "id": "SR-004",
      "title": "Implement frontend security pattern scanner",
      "acceptanceCriteria": [
        "Create src/security_review/scanners/frontend.py",
        "Detect Supabase/Firebase client usage in .tsx/.jsx files",
        "Detect client-side premium/auth gating patterns",
        "Detect localStorage auth token patterns",
        "Return findings with severity and file location"
      ],
      "priority": 16,
      "passes": true,
      "notes": "See pattern table in security-review-agent.md"
    },
    {
      "id": "SR-005",
      "title": "Implement API security pattern scanner",
      "acceptanceCriteria": [
        "Create src/security_review/scanners/api.py",
        "Detect FastAPI routes without Depends() for auth",
        "Detect Express routes without auth middleware",
        "Detect missing rate limiter patterns",
        "Return findings with severity and file location"
      ],
      "priority": 17,
      "passes": true,
      "notes": ""
    },
    {
      "id": "SR-006",
      "title": "Implement logging pattern scanner",
      "acceptanceCriteria": [
        "Create src/security_review/scanners/logging.py",
        "Detect console.log with password/secret/key variables",
        "Detect err.stack exposed in API responses",
        "Detect raw error objects sent to clients",
        "Return findings with severity and file location"
      ],
      "priority": 18,
      "passes": true,
      "notes": ""
    },
    {
      "id": "SR-007",
      "title": "Create response aggregation and severity scoring",
      "acceptanceCriteria": [
        "Combine all findings from agents and internal scanners",
        "Calculate summary counts by severity",
        "Generate top 3 actionable recommendations",
        "Support scan_mode filter (full/secrets-only/deps-only/patterns-only)"
      ],
      "priority": 19,
      "passes": true,
      "notes": ""
    },
    {
      "id": "SR-008",
      "title": "Add integration tests for security-review",
      "acceptanceCriteria": [
        "Create tests/test_main.py",
        "Test /health endpoint",
        "Test /review endpoint with mocked agent calls",
        "Test frontend pattern scanner",
        "Test API pattern scanner",
        "All tests pass with pytest"
      ],
      "priority": 20,
      "passes": true,
      "notes": ""
    }
  ]
}
